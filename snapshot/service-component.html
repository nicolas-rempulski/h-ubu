<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Dec 20, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>nanoko :: h-ubu</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

          
                
        <?xml version="1.0" encoding="UTF-8"?>
<link rel="stylesheet" type="text/css" href="./css/site.css"/>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<link rel="stylesheet" type="text/css" href="./css/font-awesome.css"/>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-1518442-11']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<script type="text/javascript">$(document).ready(function () {
                $("pre code").parent().addClass("prettyprint");
                prettyPrint();
                });</script>
      
                
        <?xml version="1.0" encoding="UTF-8"?>
<link rel="shortcut icon" href="favicon.png"/>
          
    <meta name="Date-Revision-yyyymmdd" content="20121220" />
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/nanoko-project/h-ubu">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="#" id="bannerLeft">
                                                                                                <img src="h-ubu-small.png"  alt="h-ubu - JavaScript Componentization"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2012-12-20</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.0.1-SNAPSHOT</li>
                      
                
            
      
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
            
                                    <h3>H-UBU</h3>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="motivations.html" title="Motivations and Concepts">Motivations and Concepts</a>
            </li>
                  <li class="none">
                          <a href="quickstart.html" title="Quickstart">Quickstart</a>
            </li>
                  <li class="none">
                          <a href="external-resources.html" title="Resources">Resources</a>
            </li>
          </ul>
                        <h3>User Guide</h3>
                  <ul>
                  <li class="none">
                          <a href="creating-and-registering-components.html" title="Creating and Registering Components">Creating and Registering Components</a>
            </li>
                  <li class="none">
                          <a href="providing-services.html" title="Providing Services">Providing Services</a>
            </li>
                  <li class="none">
                          <a href="requiring-services.html" title="Requiring Services">Requiring Services</a>
            </li>
                  <li class="none">
                          <a href="direct-injection.html" title="Direct Injection">Direct Injection</a>
            </li>
                  <li class="none">
                          <a href="receiving-and-sending-events.html" title="Receiving and Sending Events">Receiving and Sending Events</a>
            </li>
                  <li class="none">
                          <a href="testing-components.html" title="Testing Components">Testing Components</a>
            </li>
                  <li class="none">
                          <a href="FAQ.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                        <h3>Advanced Topics</h3>
                  <ul>
                  <li class="none">
                          <a href="using-requirejs.html" title="Using require.js">Using require.js</a>
            </li>
                  <li class="none">
                          <a href="using-nodejs.html" title="Using h-ubu in node.js">Using h-ubu in node.js</a>
            </li>
                  <li class="none">
                          <a href="contract.html" title="Contract and Conformity">Contract and Conformity</a>
            </li>
                  <li class="none">
                          <a href="service-orientation.html" title="Service-Orientation">Service-Orientation</a>
            </li>
                  <li class="none">
                          <a href="developper-guide.html" title="Developer Guide">Developer Guide</a>
            </li>
          </ul>
                        <h3>Project Documentation</h3>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                      
            
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://nanoko-project.github.com/h-ubu" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://github.com/nanoko-project/h-ubu" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Service-Oriented Components</h1>

<p>This page explains how to make a H-Ubu component a <code>service component</code>, i.e. a component requiring and providing
services, allowing loosely-coupled dynamic bindings.</p>

<h2>Concepts</h2>

<p>Using service components has several benefits. So orientated, components interact using only
<em>service specifications</em> (<code>contracts</code>), making service providers substitutable. The binding is dynamic and so you can
switch providers at runtime.</p>

<p>However, manual development of service-oriented components is error-prone and complex. So H-Ubu provides an extension
dealing with most of the concerns and so letting you focus on the component logic only. As an example, required services
are injected automatically within methods or members of the component, while service publication is also automated.</p>

<h2>Description</h2>

<p>The component needs to describe itself to tell H-Ubu what its required and provided services are. This
description is done using an API, either by an external tier or by the component itself. In this latter case,
we recommend implementing the description within the <code>configure</code> method.</p>

<h2>Requiring Services</h2>

<p>To require a service and receive the service object automatically, you need to describe a service dependency
specifying the required contract, the service filter, how the service object(s) is/are injected and so on.</p>

<pre><code>hub.requireService({
    component: cmp,
    contract : contract
    filter : function(ref) {
        ref.getProperty("lg") === "fr";
        }
    field : "mysvc"
});
</code></pre>

<p>This instructs H-Ubu to inject the service <code>contract</code> with the property <code>lg</code> set to <code>fr</code> into the field <code>mysvc</code> of
the component (<code>cmp</code>). This dependency is (by default) mandatory and scalar (only one service injected).</p>

<p>A component can directly declare the same dependency in its <code>configure</code> method:</p>

<pre><code>configure : function(hub, conf) {
    hub.requireService({
        component: cmp,
        contract : contract
        filter : function(ref) {
            ref.getProperty("lg") === "fr";
            }
        field : "mysvc"
    });
}
</code></pre>

<p>Dependencies can be:</p>

<ul>
<li><em>scalar</em> or <em>aggregate</em>: Aggregate dependencies are bound to all matching services.</li>
<li><em>mandatory</em> or <em>optional</em>: Once unresolved, a mandatory dependency instructs H-Ubu to unregister all services
provided by the same instance until the dependency is resolved again.</li>
</ul>

<p>Dependencies can be injected within fields or using <em>bind/unbind</em> methods. Field injection is the easiest,
as H-Ubu injects the service within the given field. For aggregate dependencies, the array is populated with the
matching services:</p>

<pre><code>var component = {
    services = [],
    service = null,

    configure : function(hub) {
        this.hub = hub;
        // Scalar dependency
        this.hub.requireService({
            component: this,
            contract: contract,
            field: "service"

        });

        // Aggregate dependency
        this.hub.requireService({
            component: this,
            contract: contract,
            aggregate : true,
            field: "services"
        });
    },

    //...

    doSomething : function() {
         var i = 0;
         service.doSomethingWithTheService();
         for (; i &lt; services.length; i++) {
            services[i].doSomethingWithTheService();
         }
    }
};
</code></pre>

<p>Using bind and unbind methods allows you to be notified when a new service appears and when a service disappears:</p>

<pre><code>var component = {
        services = [],
        service = null,

        configure : function(hub) {
            this.hub = hub;
            // Scalar dependency
            this.hub.requireService({
                component: this,
                contract: contract,
                bind: component.bind,
                unbind: component.unbind
            });
        },

        bind : function (svc) {
            this.service = svc;
        },

        unbind : function (svc) {
            if (this.service === svc) {
                this.service = null
            }
        },


        //...

        doSomething : function() {
             service.doSomethingWithTheService();
        }
    };
</code></pre>

<p>The bind and unbind methods receive the service object and, as a second argument, the service reference.</p>

<h2>Publishing Services</h2>

<h2>Dynamism</h2>

<h2>Modifying published services</h2>

                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2010-2012
                        <a href="http://www.arrow-group.eu/">Arrow-Group</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
